# 1 基本概念
> 数据、数据库、数据库管理系统、数据库系统的概念。
## 1) 数据
Data
基本概念：数据是描述事物的符号记录，用物理符号记录下来的、可以鉴别的信息。
表现形式：文本数据、多媒体数据等经过数字化处理存入计算机，方便进一步加工处理。
数据语义(表头)：数据是信息存在的一种形式,只有通过解释或处理的数据才能成为有用的信息;
## 2) 数据库DB
DataBase
基本概念：数据库(Database,DB)是指长期存储在计算机中的有组织的,可共享的**数据的集合**。
一般指一个具体的数据集/库（可以理解成database instance），如果是关系模型的话，就是一些表、索引或者视图等。
原则:
	1.数据库要按照一定的 数据模型 组织,描述和存储,
	2.具有 **较小的冗余度** ,较高的 **数据独立性** ,//不必要的多次重复存储(冗余度)
	3.系统 易于扩展 ,并可以被 多个用户分享 ;
三个基本特点:
	1.永久存储
	2.有组织
	3.可共享
数据库定义(解答题举例)
	数据库是长期存储在计算机中有组织的可共享的数据集合,且数据库中的数据按一定的数据模型组织,描述和存储,具有较小的冗余度,较高的数据独立性,系统易于扩展,并可以被多个用户分享;
## 3) 数据库管理系统DBMS
DataBase Management System
基本概念：组织、存储、获取、维护数据的软件，也就是对数据进行增删改查等操作的软件。
介于应用程序和操作系统之间，可以简单的理解就是mysql本身这个软件。
## 4) 数据库系统DBS
DataBase System
DB+DBMS+DBA+应用系统 = DBS

DB：数据库(一个或者多个数据表集合) 
DBMS：数据库管理系统(mysql等)
DBA：数据管理员(相关人员)
计算机软件/硬件系统

DBS构成示意图:
	        用户(程序员)     用户(数据库终端用户)
			           ↘            ↙
		               应用程序
			                  ↓
			            数据库管理系统--->数据库管理员(DBA)
			               (DBMS)
			                  ↓
			               数据库
			                (DB)

# 2 数据管理技术的发展
## 数据管理角度
从数据管理的角度看，数据库技术到目前共经历了如下三个阶段：  
1. 人工管理阶段-数据量小独立,用户直接管理  
2. 文件系统阶段-使用文件存取数据,冗余度高,管理维护难  
3. 数据库系统阶段-专门的数据库软件系统管理数据,高效方便,易于共享维护
## 数据库系统的优点
- 数据冗余小，共享性高：多个程序可以通过DBMS访问同一段数据文件
- 数据独立性：数据和应用程序之间依赖小，修改字段中的数据对程序没有影响
- 数据结构化：通过外键等规则可以建立数据表之间的关系
- 具有统一的数据控制功能：
## 数据模型角度
按照数据模型发展的主线，数据库技术的形成过程和发展可分为如下三个阶段：  
1. 层次和网状数据库管理系统-可以理解为使用指针来表示数据之间的联系  
2. 关系数据库管理系统(RDBMS)-可以理解为理解为使用二维表来表示维护数据间的关系  
3. 新一代数据库技术的研究和发展

针对关系型数据库存在数据模型，性能，扩展性，伸缩性等方面的缺点，出现了：  
**ORDBMS**
面向对象数据库技术。如：PostGreSQL  
**NoSQL**
非结构化数据库技术。如  
1):键值存储数据库：Redis  
2):列式储数数据库：HBase  
3):文档型数据库：MongoDB  
4):图形数据库：Neo4J  
**NewSQL**
这类数据库不仅具有NoSQL对海量数据的存储管理能力，还保持了传统数据库支持ACID和SQL等特性。如：TiDB

如今的数据库种类繁多，RDBMS（关系型数据库）、NoSQL（Not Only SQL）、NewSQL，在数据库领域均有一席之地，可谓百家争鸣之势。那么我们为什么要学习使用TiDB呢？接下来就从我们最熟悉的MySQL的使用说起！  
假设现在有一个高速发展的互联网公司,核心业务库MySQL的数据量已经近亿行,且还在不断增长中,公司对于数据资产较为重视,所有数据要求多副本保存至少5年,且除了有对历史数据进行统计分析的离线报表业务外,还有一些针对用户数据实时查询的需求,如用户历史订单实时查询。
由此产生了下面的问题：  
**1.MySQL能否满足上述场景需求?**  
根据以往的MySQL使用经验，MySQL单表在 5000 万行以内时，性能较好，单表超过5000万行后，数据库性能、可维护性都会极剧下降。当然这时候可以做MySQL分库分表,如使用Mycat或Sharding-jdbc   
**2.分库分表的能否解决问题?**  
**分库分表**的优点非常明显，如：
- 将大表拆分成小表，单表数据量控制在 5000 万行以内，使 MySQL 性能稳定可控。  
- 将单张大表拆分成小表后，能水平扩展，通过部署到多台服务器，提升整个集群的 QPS、TPS、Latency 等数据库服务指标。  
**但是，此方案的缺点也非常明显：**  
- 分表跨实例后，产生分布式事务管理难题，一旦数据库服务器宕机，有事务不一致风险。  
- 分表后，对 SQL 语句有一定限制，对业务方功能需求大打折扣。尤其对于实时报表统计类需求，限制非常之大。事实上，报表大多都是提供给高层领导使用的，其重要性不言而喻。  
- 分表后，需要维护的对象呈指数增长（MySQL实例数、需要执行的 SQL 变更数量等）。  
问题解决：  
于以上核心痛点，我们需要探索新的数据库技术方案来应对业务爆发式增长所带来的挑战，为业务提供更好的数据库服务支撑。  
调研市场上的各大数据库,我们可以考虑选用NewSQL技术来解决,因为NewSQL技术有如下显著特点:  
- 无限水平扩展能力  
- 分布式强一致性，确保数据 100% 安全  
- 完整的分布式事务处理能力与 ACID 特性  
TiDB数据库是 GitHub的活跃度及社区贡献者方面都可以算得上是国际化的开源项目
是NewSQL技术中的代表性产品,所以我们可以选择使用TiDB数据库!

**总结**
传统关系型数据库历史比较久，目前RDBMS的代表为Oracle、MySQL、PostgreSQL，在数据库领域也是“辈份”比较高的，其广泛应用在各行各业，RDBMS大多为本地存储或共享存储。**但是**此类数据库存在着一些问题，如自身容量的限制。随着业务量不断增加，容量渐渐成为瓶颈，此时DBA会通过多次的库表sharding，以此来缓解容量问题。大量的分库分表，不仅耗费了大量人力，还使得业务访问数据库的路由逻辑变得复杂。除此之外，RDBMS伸缩性比较差，通常集群扩容缩容成本较高，且不满足分布式的事务。  NoSQL类数据库的代表为Hbase、Redis、MongoDB、Cassandra等，这类数据库解决了 RDBMS伸缩性差的问题，集群容量扩容变得方便很多，但是由于存储方式为多个KV存储，所以对SQL的兼容性就大打折扣。对于NoSQL类数据库来说，只能满足部分分布式事务的特点。NewSQL领域的代表是Google的spanner和F1，其号称可以实现全球数据中心容灾，且完全满足分布式事务的ACID，但是只能在Google云上使用。  TiDB诞生在大背景下，也弥补了国内在NewSQL领域中的空缺。TiDB自2015年5月写下第一行代码以来，至今已发布大小版本几十次，版本迭代十分迅速。

# 3 数据库系统的结构
## 数据库系统的三级模式结构
人们为数据库设计了一个严谨的体系结构，数据库领域公认的标准结构是三级模式结构，它包括外模式、概念模式、内模式。
用户级对应外模式，概念级对应概念模式，物理级对应内模式，使不同级别的用户对数据库形成不同的视图。

外模式  
　　外模式又称子模式或用户模式，对应于用户级。它是某个或某几个用户所看到的数据库的数据视图，是与某一应用有关的数据的逻辑表示。外模式是从模式导出的一个子集，包含模式中允许特定用户使用的那部分数据。用户可以通过外模式描述语言来描述、定义对应于用户的数据记录(外模式)，也可以利用数据操纵语言(Data Manipulation Language，DML)对这些数据记录进行操作。外模式反映了数据库系统的用户观。

概念模式
　　概念模式又称模式或逻辑模式，对应于概念级。它是由数据库设计者综合所有用户的数据，按照统一的观点构造的全局逻辑结构，是对数据库中全部数据的逻辑结构和特征的总体描述，是所有用户的公共数据视图(全局视图)。它是由数据库管理系统提供的数据模式描述语言(Data Description Language，DDL)来描述、定义的。概念模式反映了数据库系统的整体观。

内模式
　　内模式又称存储模式，对应于物理级。它是数据库中全体数据的内部表示或底层描述，是数据库最低一级的逻辑描述，它描述了数据在存储介质上的存储方式和物理结构，对应着实际存储在外存储介质上的数据库。内模式由内模式描述语言来描述、定义的。内模式反映了数据库系统的存储观。
## 数据库系统的运行与应用结构
客户/服务器（Client/Server,C/S）模式  
特点：需要下载，如微信、QQ、桌面客户端游戏

浏览器/服务器（Browser/Server，B/S)模式
特点：不需要下载。如网站、在线web端游戏

# 4 数据模型

## 数据特征与数据模型组成要素
### 组成要素
数据模型通常由数据结构、数据操作和完整性约束条件三部分组成。  
①数据结构  
数据结构描述数据库的组成对象以及对象之间的联系。  
②数据操作    
是指对数据库中各种对象（型）的实例（值）允许执行的操作的集合，包括操作及有关的操作规则。  
③数据的完整性约束条件  
是一组完整性规则。数据模型应该反映和规定其必须遵守的基本和通用的完整性约束条件。

### 数据模型
数据库技术的发展是沿着数据模型的主线推进的。  
数据模型（data model）是对现实世界数据特征的抽象，也就是说数据模型是用来描述数据、组织数据和对数据进行操作的。  
数据模型是数据库系统的核心和基础。  
数据模型应满足三方面要求：  
①能比较真实地模拟现实世界  
②容易为人所理解  
③便于在计算机上实现  

## 数据模型的分类
根据模型应用目的不同，可以分为两大类：  
①概念模型 ②逻辑模型和物理模型

### 概念模型（conceptual model）  
也称信息模型，按用户的观点来对数据和信息建模，主要用于数据库设计。  
概念模型实际上是现实世界到机器世界的一个中间层次。  

①信息世界中的基本概念  
（1）实体（entity）  
客观存在并可相互区别的事物称为实体。  
（2）属性（attribute）  
实体所具有的某一特征称为属性。  
（3）码（key）  
唯一标识实体的属性集称为码。  
（4）实体型（entity type）  
用实体名及其属性名集合来抽象和刻画同类实体，例如，学生（学号，姓名，性别，出生年月，所在院系，入学时间）就是一个实体型。  
（5）实体集（entity set）  
同一类型实体的集合称为实体集。  
（6）联系（relationship）  
包括实体内部的联系和实体之间的联系。  
实体之间的联系通常是指不同实体集之间的联系。  
实体之间的联系有一对一、一对多和多对多等多种类型。  
  
②概念模型的一种表示方法：实体-联系方法  
该方法用E-R图来描述现实世界的概念模型，E-R方法也称为E-R模型。

### 逻辑层数据模型
1.  层次数据模型
2.  网状数据模型
3.  关系数据模型
4.  面向对象模型

### 物理层数据模型
也称为数据的物理模型，是逻辑层的物理实现
一般对用户屏蔽

